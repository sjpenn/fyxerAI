<!-- ShadCN UI Modal Component Template for Alpine.js -->

<!-- Basic Modal -->
<div 
    x-data="AlpineComponents.modal()"
    x-show="open"
    x-transition:enter="transition ease-out duration-300"
    x-transition:enter-start="opacity-0"
    x-transition:enter-end="opacity-100"
    x-transition:leave="transition ease-in duration-200"
    x-transition:leave-start="opacity-100"
    x-transition:leave-end="opacity-0"
    @click.self="hide()"
    @keydown.escape.window="hide()"
    class="modal-overlay"
    role="dialog"
    aria-modal="true"
    :aria-labelledby="$id('modal-title')"
    :aria-describedby="$id('modal-description')"
    x-trap.noscroll="open">
    
    <div 
        class="modal-container"
        x-transition:enter="transition ease-out duration-300"
        x-transition:enter-start="opacity-0 scale-95"
        x-transition:enter-end="opacity-100 scale-100"
        x-transition:leave="transition ease-in duration-200"
        x-transition:leave-start="opacity-100 scale-100"
        x-transition:leave-end="opacity-0 scale-95">
        
        <!-- Modal Header -->
        <div class="modal-header">
            <h2 class="modal-title" :id="$id('modal-title')">
                <slot name="title">Modal Title</slot>
            </h2>
            <button 
                @click="hide()"
                class="modal-close"
                aria-label="Close modal">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>
        
        <!-- Modal Content -->
        <div class="modal-content" :id="$id('modal-description')">
            <slot>
                <p class="text-slate-600 dark:text-slate-400">
                    This is the modal content. You can place any content here including forms, text, images, or other components.
                </p>
            </slot>
        </div>
        
        <!-- Modal Footer -->
        <div class="modal-footer">
            <slot name="footer">
                <button @click="hide()" class="btn btn-outline">Cancel</button>
                <button @click="hide()" class="btn btn-primary">Confirm</button>
            </slot>
        </div>
    </div>
</div>

<!-- Confirmation Modal -->
<div 
    x-data="{ 
        ...AlpineComponents.modal(),
        type: 'info', // success, warning, error, info
        confirm() {
            // Handle confirmation
            this.hide();
        }
    }"
    x-show="open"
    x-transition:enter="transition ease-out duration-300"
    x-transition:enter-start="opacity-0"
    x-transition:enter-end="opacity-100"
    x-transition:leave="transition ease-in duration-200"
    x-transition:leave-start="opacity-100"
    x-transition:leave-end="opacity-0"
    @click.self="hide()"
    @keydown.escape.window="hide()"
    class="modal-overlay modal-confirm"
    :class="{
        'modal-confirm-success': type === 'success',
        'modal-confirm-warning': type === 'warning', 
        'modal-confirm-error': type === 'error'
    }"
    role="dialog"
    aria-modal="true"
    x-trap.noscroll="open">
    
    <div 
        class="modal-container"
        x-transition:enter="transition ease-out duration-300"
        x-transition:enter-start="opacity-0 scale-95"
        x-transition:enter-end="opacity-100 scale-100"
        x-transition:leave="transition ease-in duration-200"
        x-transition:leave-start="opacity-100 scale-100"
        x-transition:leave-end="opacity-0 scale-95">
        
        <!-- Modal Content -->
        <div class="modal-content">
            <!-- Icon -->
            <div class="modal-icon">
                <!-- Success Icon -->
                <svg x-show="type === 'success'" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
                
                <!-- Warning Icon -->
                <svg x-show="type === 'warning'" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                </svg>
                
                <!-- Error Icon -->
                <svg x-show="type === 'error'" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
                
                <!-- Info Icon -->
                <svg x-show="type === 'info'" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
            </div>
            
            <!-- Title -->
            <h3 class="modal-title mb-2">
                <slot name="title">Confirm Action</slot>
            </h3>
            
            <!-- Message -->
            <p class="text-slate-600 dark:text-slate-400">
                <slot name="message">Are you sure you want to perform this action? This cannot be undone.</slot>
            </p>
        </div>
        
        <!-- Modal Footer -->
        <div class="modal-footer">
            <button @click="hide()" class="btn btn-outline">Cancel</button>
            <button 
                @click="confirm()"
                :class="{
                    'btn': true,
                    'btn-success': type === 'success',
                    'btn-warning': type === 'warning',
                    'btn-destructive': type === 'error',
                    'btn-primary': type === 'info'
                }">
                <slot name="confirmText">Confirm</slot>
            </button>
        </div>
    </div>
</div>

<!-- Form Modal -->
<div 
    x-data="{ 
        ...AlpineComponents.modal(),
        ...AlpineComponents.form({
            name: '',
            email: '',
            message: ''
        }),
        async submitForm() {
            try {
                const result = await this.submit('/api/contact', 'POST');
                console.log('Form submitted:', result);
                this.hide();
                // Show success message
            } catch (error) {
                console.error('Form submission failed:', error);
            }
        }
    }"
    x-show="open"
    x-transition:enter="transition ease-out duration-300"
    x-transition:enter-start="opacity-0"
    x-transition:enter-end="opacity-100"
    x-transition:leave="transition ease-in duration-200"
    x-transition:leave-start="opacity-100"
    x-transition:leave-end="opacity-0"
    @click.self="hide()"
    @keydown.escape.window="hide()"
    class="modal-overlay"
    role="dialog"
    aria-modal="true"
    x-trap.noscroll="open">
    
    <div 
        class="modal-container modal-lg"
        x-transition:enter="transition ease-out duration-300"
        x-transition:enter-start="opacity-0 scale-95"
        x-transition:enter-end="opacity-100 scale-100"
        x-transition:leave="transition ease-in duration-200"
        x-transition:leave-start="opacity-100 scale-100"
        x-transition:leave-end="opacity-0 scale-95">
        
        <!-- Modal Header -->
        <div class="modal-header">
            <h2 class="modal-title">Contact Form</h2>
            <button 
                @click="hide()"
                class="modal-close"
                aria-label="Close modal">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>
        
        <!-- Form Content -->
        <form @submit.prevent="submitForm()" class="modal-content modal-form">
            <!-- Name Field -->
            <div class="form-group">
                <label for="name" class="form-label form-label-required">Name</label>
                <input 
                    type="text" 
                    id="name"
                    x-model="data.name"
                    :class="{
                        'input': true,
                        'input-error': hasError('name')
                    }"
                    placeholder="Enter your name"
                    required>
                <p x-show="hasError('name')" class="form-error" x-text="getError('name')"></p>
            </div>
            
            <!-- Email Field -->
            <div class="form-group">
                <label for="email" class="form-label form-label-required">Email</label>
                <input 
                    type="email" 
                    id="email"
                    x-model="data.email"
                    :class="{
                        'input': true,
                        'input-error': hasError('email')
                    }"
                    placeholder="Enter your email"
                    required>
                <p x-show="hasError('email')" class="form-error" x-text="getError('email')"></p>
            </div>
            
            <!-- Message Field -->
            <div class="form-group">
                <label for="message" class="form-label">Message</label>
                <textarea 
                    id="message"
                    x-model="data.message"
                    :class="{
                        'textarea': true,
                        'input-error': hasError('message')
                    }"
                    placeholder="Enter your message"
                    rows="4"></textarea>
                <p x-show="hasError('message')" class="form-error" x-text="getError('message')"></p>
            </div>
        </form>
        
        <!-- Modal Footer -->
        <div class="modal-footer">
            <button @click="hide()" type="button" class="btn btn-outline">Cancel</button>
            <button 
                @click="submitForm()"
                type="submit"
                :disabled="submitting"
                :class="{
                    'btn btn-primary': true,
                    'btn-loading': submitting
                }">
                <span x-show="!submitting">Send Message</span>
                <span x-show="submitting">Sending...</span>
            </button>
        </div>
    </div>
</div>

<!-- Sliding Panel Modal -->
<div 
    x-data="AlpineComponents.modal()"
    x-show="open"
    x-transition:enter="transition ease-out duration-300"
    x-transition:enter-start="opacity-0"
    x-transition:enter-end="opacity-100"
    x-transition:leave="transition ease-in duration-200"
    x-transition:leave-start="opacity-100"
    x-transition:leave-end="opacity-0"
    @click.self="hide()"
    @keydown.escape.window="hide()"
    class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-end"
    role="dialog"
    aria-modal="true"
    x-trap.noscroll="open">
    
    <div 
        class="bg-white dark:bg-slate-900 h-full w-96 shadow-xl border-l border-slate-200 dark:border-slate-800 flex flex-col"
        x-transition:enter="transition ease-out duration-300"
        x-transition:enter-start="translate-x-full"
        x-transition:enter-end="translate-x-0"
        x-transition:leave="transition ease-in duration-200"
        x-transition:leave-start="translate-x-0"
        x-transition:leave-end="translate-x-full">
        
        <!-- Panel Header -->
        <div class="flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-800">
            <h2 class="text-lg font-semibold text-slate-900 dark:text-slate-100">
                <slot name="title">Side Panel</slot>
            </h2>
            <button 
                @click="hide()"
                class="p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-md transition-colors"
                aria-label="Close panel">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>
        
        <!-- Panel Content -->
        <div class="flex-1 p-6 overflow-y-auto">
            <slot>
                <p class="text-slate-600 dark:text-slate-400">
                    This is a sliding panel that appears from the right side of the screen. Perfect for detailed views, settings, or forms.
                </p>
            </slot>
        </div>
        
        <!-- Panel Footer -->
        <div class="p-6 border-t border-slate-200 dark:border-slate-800">
            <slot name="footer">
                <div class="flex space-x-3">
                    <button @click="hide()" class="btn btn-outline flex-1">Cancel</button>
                    <button @click="hide()" class="btn btn-primary flex-1">Save</button>
                </div>
            </slot>
        </div>
    </div>
</div>